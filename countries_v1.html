<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pays TP REST Countries</title>
    <style>
        body {
            margin: 5% 10%;
            background-color: #141b33;
        }

        h1 {
            font-family: sans-serif;
            color: white;
            text-align: center;
            text-transform: uppercase;
        }

        tbody {
            border-end-start-radius: 20px;
        }

        table {
            width: 100%;
            height: max-content;
            margin-bottom: 20px;
            font-family: sans-serif;
            box-shadow: 0 3px 5px black;
            border-collapse: collapse;
            border-radius: 1em;
        }

        thead {
            position: sticky;
            top: -1px;
            z-index: 2;
        }

        th,
        td {
            text-align: left;
            padding: 1em;
        }

        th {
            background-color: #20273d;
            font-weight: bold;
            color: rgb(223, 223, 223);
            border: solid 1px #161d35;
        }

        td {
            background-color: #3a4054;
            height: max-content;
            border: solid 1px #20273d;
            color: rgb(223, 223, 223);
        }

        tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        .url {
            display: flex;
            justify-content: center;
        }

        img {
            width: 150px;
            display: flex;
            justify-content: center;
        }
    </style>
</head>

<body>
    <h1>TP Rest Countries Partie 2</h1>
    <table>
        <thead>
            <tr>
                <th>Pays</th>
                <th>Nom</th>
                <th>Population</th>
                <th>Surface</th>
                <th>Densité (Population)</th>
                <th>Continent</th>
                <th>Drapeau</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

</body>

<script src="countries.js"></script>
<script>

    const tbody = document.querySelector('tbody');

    let cpt = 1;

    for (const country in all_countries) {
        if (all_countries[country].getPopDensity() == Infinity) {
            console.log(all_countries[country]);
        }
    }

    for (const country in all_countries) {

        let num = document.createElement("td");
        let nom = document.createElement("td");
        let pop = document.createElement("td");
        let surface = document.createElement("td");
        let densite = document.createElement("td");
        let continent = document.createElement("td");
        let url = document.createElement("td");
        let image = document.createElement("img");

        url.appendChild(image);
        url.classList.add("url");

        let tr = document.createElement("tr");
        tr.classList.add("template")
        num.innerHTML = cpt;
        tr.appendChild(num);

        // Nom du pays
        nom.innerHTML = all_countries[country]._nom;
        tr.appendChild(nom);

        // Population du pays
        pop.innerHTML = all_countries[country]._population;
        tr.appendChild(pop);

        // Superficie du pays
        if (all_countries[country]._superficie != null) {
            surface.innerHTML = all_countries[country]._superficie + " km<sup>2</sup>";
            tr.appendChild(surface);
        } else {
            surface.innerHTML = "Indisponible";
            tr.appendChild(surface);
        }

        // Densité du pays
        if (all_countries[country].getPopDensity() != Infinity) {
            densite.innerHTML = all_countries[country].getPopDensity();
            tr.appendChild(densite);
        } else {
            densite.innerHTML = "Indisponible";
            tr.appendChild(densite);
        }

        // Continent du pays
        continent.innerHTML = all_countries[country]._continent;
        tr.appendChild(continent);

        // Drapeau du pays
        image.src = all_countries[country]._drapeau;
        console.log(all_countries[country]._drapeau);
        tr.appendChild(url);

        tbody.appendChild(tr);
        cpt++;
    }


</script>

</html>